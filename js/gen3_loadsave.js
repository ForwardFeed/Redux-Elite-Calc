var GEN3_MOVES=["","Pound","Karate Chop","Double Slap","Comet Punch","Mega Punch","Pay Day","Fire Punch","Ice Punch","Thunder Punch","Scratch","Vise Grip","Guillotine","Razor Wind","Swords Dance","Cut","Gust","Wing Attack","Whirlwind","Fly","Bind","Slam","Vine Whip","Stomp","Double Kick","Mega Kick","Jump Kick","Rolling Kick","Sand Attack","Headbutt","Horn Attack","Fury Attack","Horn Drill","Tackle","Body Slam","Wrap","Take Down","Thrash","Double-Edge","Tail Whip","Poison Sting","Twineedle","Pin Missile","Leer","Bite","Growl","Roar","Sing","Supersonic","Sonic Boom","Disable","Acid","Ember","Flamethrower","Mist","Water Gun","Hydro Pump","Surf","Ice Beam","Blizzard","Psybeam","Bubble Beam","Aurora Beam","Hyper Beam","Peck","Drill Peck","Submission","Low Kick","Counter","Seismic Toss","Strength","Absorb","Mega Drain","Leech Seed","Growth","Razor Leaf","Solar Beam","Poison Powder","Stun Spore","Sleep Powder","Petal Dance","String Shot","Dragon Rage","Fire Spin","Thunder Shock","Thunderbolt","Thunder Wave","Thunder","Rock Throw","Earthquake","Fissure","Dig","Toxic","Confusion","Psychic","Hypnosis","Meditate","Agility","Quick Attack","Rage","Teleport","Night Shade","Mimic","Screech","Double Team","Recover","Harden","Minimize","Smokescreen","Confuse Ray","Withdraw","Defense Curl","Barrier","Light Screen","Haze","Reflect","Focus Energy","Bide","Metronome","Mirror Move","Self-Destruct","Egg Bomb","Lick","Smog","Sludge","Bone Club","Fire Blast","Waterfall","Clamp","Swift","Skull Bash","Spike Cannon","Constrict","Amnesia","Kinesis","Soft Boiled","High Jump Kick","Glare","Dream Eater","Poison Gas","Barrage","Leech Life","Lovely Kiss","Sky Attack","Transform","Bubble","Dizzy Punch","Spore","Flash","Psywave","Splash","Acid Armor","Crabhammer","Explosion","Fury Swipes","Bonemerang","Rest","Rock Slide","zHyper Fang","Sharpen","Conversion","Tri Attack","Super Fang","Slash","Substitute","Struggle","Sketch","Triple Kick","Thief","Spider Web","Mind Reader","Nightmare","Flame Wheel","Snore","Curse","Flail","Conversion 2","Aeroblast","Cotton Spore","Reversal","Spite","Powder Snow","Protect","Mach Punch","Scary Face","Feint Attack","Sweet Kiss","Belly Drum","Sludge Bomb","Mud-Slap","Octazooka","Spikes","Zap Cannon","Foresight","Destiny Bond","Perish Song","Icy Wind","Detect","Bone Rush","Lock-On","Outrage","Sandstorm","Giga Drain","Endure","Charm","Rollout","False Swipe","Swagger","Milk Drink","Spark","Fury Cutter","Steel Wing","Mean Look","Attract","Sleep Talk","Heal Bell","Return","Present","Frustration","Safeguard","Pain Split","Sacred Fire","Magnitude","Dynamic Punch","Megahorn","Dragon Breath","Baton Pass","Encore","Pursuit","Rapid Spin","Sweet Scent","Iron Tail","Metal Claw","Vital Throw","Morning Sun","Synthesis","Moonlight","Hidden Power","Cross Chop","Twister","Rain Dance","Sunny Day","Crunch","Mirror Coat","Psych Up","Extreme Speed","Ancient Power","Shadow Ball","Future Sight","Rock Smash","Whirlpool","Beat Up","Fake Out","Uproar","Stockpile","Spit Up","Swallow","Heat Wave","Hail","Torment","Flatter","Will-O-Wisp","Memento","Facade","Focus Punch","Smelling Salts","Follow Me","Nature Power","Charge","Taunt","Helping Hand","Trick","Role Play","Wish","Assist","Ingrain","Superpower","Magic Coat","Recycle","Revenge","Brick Break","Yawn","Knock Off","Endeavor","Eruption","Skill Swap","Imprison","Refresh","Grudge","Snatch","Secret Power","Dive","Arm Thrust","Camouflage","Tail Glow","Luster Purge","Mist Ball","Feather Dance","Teeter Dance","Blaze Kick","Mud Sport","Ice Ball","Needle Arm","Slack Off","Hyper Voice","Poison Fang","Crush Claw","Blast Burn","Hydro Cannon","Meteor Mash","Astonish","Weather Ball","Aromatherapy","Fake Tears","Air Cutter","Overheat","Odor Sleuth","Rock Tomb","Silver Wind","Metal Sound","Grass Whistle","Tickle","Cosmic Power","Water Spout","Signal Beam","Shadow Punch","Extrasensory","Sky Uppercut","Sand Tomb","Sheer Cold","Muddy Water","Bullet Seed","Aerial Ace","Icicle Spear","Iron Defense","Block","Howl","Dragon Claw","Frenzy Plant","Bulk Up","Bounce","Mud Shot","Poison Tail","Covet","Volt Tackle","Magical Leaf","Water Sport","Calm Mind","Leaf Blade","Dragon Dance","Rock Blast","Shock Wave","Water Pulse","Doom Desire","Psycho Boost","Roost","Gravity","Miracle Eye","Wake-Up Slap","Hammer Arm","Gyro Ball","Healing Wish","Brine","Natural Gift","Feint","Pluck","Tailwind","Acupressure","Metal Burst","U-turn","Close Combat","Payback","Assurance","Embargo","Fling","Psycho Shift","Trump Card","Heal Block","Wring Out","Power Trick","Gastro Acid","Lucky Chant","Me First","Copycat","Power Swap","Guard Swap","Punishment","Last Resort","Worry Seed","Sucker Punch","Toxic Spikes","Heart Swap","Aqua Ring","Magnet Rise","Flare Blitz","Force Palm","Aura Sphere","Rock Polish","Poison Jab","Dark Pulse","Night Slash","Aqua Tail","Seed Bomb","Air Slash","X-Scissor","Bug Buzz","Dragon Pulse","Dragon Rush","Power Gem","Drain Punch","Vacuum Wave","Focus Blast","Energy Ball","Brave Bird","Earth Power","Switcheroo","Giga Impact","Nasty Plot","Bullet Punch","Avalanche","Ice Shard","Shadow Claw","Thunder Fang","Ice Fang","Fire Fang","Shadow Sneak","Mud Bomb","Psycho Cut","Zen Headbutt","Mirror Shot","Flash Cannon","Rock Climb","Defog","Trick Room","Draco Meteor","Discharge","Lava Plume","Leaf Storm","Power Whip","Rock Wrecker","Cross Poison","Gunk Shot","Iron Head","Magnet Bomb","Stone Edge","Captivate","Stealth Rock","Grass Knot","Chatter","Judgment","Bug Bite","Charge Beam","Wood Hammer","Aqua Jet","Attack Order","Defend Order","Heal Order","Head Smash","Double Hit","Roar of Time","Spacial Rend","Lunar Dance","Crush Grip","Magma Storm","Dark Void","Seed Flare","Ominous Wind","Shadow Force","Hone Claws","Wide Guard","Guard Split","Power Split","Wonder Room","Psyshock","Venoshock","Autotomize","Rage Powder","Telekinesis","Magic Room","Smack Down","Storm Throw","Flame Burst","Sludge Wave","Quiver Dance","Heavy Slam","Synchronoise","Electro Ball","Soak","Flame Charge","Coil","Low Sweep","Acid Spray","Foul Play","Simple Beam","Entrainment","After You","Round","Echoed Voice","Chip Away","Clear Smog","Stored Power","Quick Guard","Ally Switch","Scald","Shell Smash","Heal Pulse","Hex","Sky Drop","Shift Gear","Circle Throw","Incinerate","Quash","Acrobatics","Reflect Type","Retaliate","Final Gambit","Bestow","Inferno","Water Pledge","Fire Pledge","Grass Pledge","Volt Switch","Struggle Bug","Bulldoze","Frost Breath","Dragon Tail","Work Up","Electroweb","Wild Charge","Drill Run","Dual Chop","Heart Stamp","Horn Leech","Sacred Sword","Razor Shell","Heat Crash","Leaf Tornado","Steamroller","Cotton Guard","Night Daze","Psystrike","Tail Slap","Hurricane","Head Charge","Gear Grind","Searing Shot","Techno Blast","Relic Song","Secret Sword","Glaciate","Bolt Strike","Blue Flare","Fiery Dance","Freeze Shock","Ice Burn","Snarl","Icicle Crash","V-create","Fusion Flare","Fusion Bolt","Flying Press","Mat Block","Belch","Rototiller","Sticky Web","Fell Stinger","Phantom Force","Trick-or-Treat","Noble Roar","Ion Deluge","Parabolic Charge","Forest's Curse","Petal Blizzard","Freeze-Dry","Disarming Voice","Parting Shot","Topsy-Turvy","Draining Kiss","Crafty Shield","Flower Shield","Grassy Terrain","Misty Terrain","Electrify","Play Rough","Fairy Wind","Moonblast","Boomburst","Fairy Lock","King's Shield","Play Nice","Confide","Diamond Storm","Steam Eruption","Hyperspace Hole","Water Shuriken","Mystical Fire","Spiky Shield","Aromatic Mist","Eerie Impulse","Venom Drench","Powder","Geomancy","Magnetic Flux","Happy Hour","Electric Terrain","Dazzling Gleam","Celebrate","Hold Hands","Baby-Doll Eyes","Nuzzle","Hold Back","Infestation","Power-Up Punch","Oblivion Wing","Thousand Arrows","Thousand Waves","Land's Wrath","Light of Ruin","Origin Pulse","Precipice Blades","Dragon Ascent","Hyperspace Fury","Shore Up","First Impression","Baneful Bunker","Spirit Shackle","Darkest Lariat","Sparkling Aria","Ice Hammer","Floral Healing","High Horsepower","Strength Sap","Solar Blade","Leafage","Spotlight","Toxic Thread","Laser Focus","Gear Up","Throat Chop","Pollen Puff","Anchor Shot","Psychic Terrain","Lunge","Fire Lash","Power Trip","Burn Up","Speed Swap","Smart Strike","Purify","Revelation Dance","Core Enforcer","Trop Kick","Instruct","Beak Blast","Clanging Scales","Dragon Hammer","Brutal Swing","Aurora Veil","Shell Trap","Fleur Cannon","Psychic Fangs","Stomping Tantrum","Shadow Bone","Accelerock","Liquidation","Prismatic Laser","Spectral Thief","Sunsteel Strike","Moongeist Beam","Tearful Look","Zing Zap","Nature's Madness","Multi-Attack","Mind Blown","Plasma Fists","Photon Geyser","Zippy Zap","Splishy Splash","Floaty Fall","Pika Papow","Bouncy Bubble","Buzzy Buzz","Sizzly Slide","Glitzy Glow","Baddy Bad","Sappy Seed","Freezy Frost","Sparkly Swirl","Veevee Volley","Double Iron Bash","Dynamax Cannon","Snipe Shot","Jaw Lock","Stuff Cheeks","No Retreat","Tar Shot","Magic Powder","Dragon Darts","Teatime","Octolock","Bolt Beak","Fishious Rend","Court Change","Clangorous Soul","Body Press","Decorate","Drum Beating","Snap Trap","Pyro Ball","Behemoth Blade","Behemoth Bash","Aura Wheel","Breaking Swipe","Branch Poke","Overdrive","Apple Acid","Grav Apple","Spirit Break","Strange Steam","Life Dew","Obstruct","False Surrender","Meteor Assault","Eternabeam","Steel Beam","Expanding Force","Steel Roller","Scale Shot","Meteor Beam","Shell Side Arm","Misty Explosion","Grassy Glide","Rising Voltage","Terrain Pulse","Skitter Smack","Burning Jealousy","Lash Out","Poltergeist","Corrosive Gas","Coaching","Flip Turn","Triple Axel","Dual Wingbeat","Scorching Sands","Jungle Healing","Wicked Blow","Surging Strikes","Thunder Cage","Dragon Energy","Freezing Glare","Fiery Wrath","Thunderous Kick","Glacial Lance","Astral Barrage","Eerie Spell","Dire Claw","Psyshield Bash","Power Shift","Stone Axe","Springtide Storm","Mystical Power","Raging Fury","Wave Crash","Chloroblast","Mountain Gale","Victory Dance","Headlong Rush","Barb Barrage","Esper Wing","Bitter Malice","Shelter","Triple Arrows","Infernal Parade","Ceaseless Edge","Bleakwind Storm","Wildbolt Storm","Sandsear Storm","Lunar Blessing","Take Heart"]
var GEN3_MONS=["","Bulbasaur","Ivysaur","Venusaur","Charmander","Charmeleon","Charizard","Squirtle","Wartortle","Blastoise","Caterpie","Metapod","Butterfree","Weedle","Kakuna","Beedrill","Pidgey","Pidgeotto","Pidgeot","Rattata","Raticate","Spearow","Fearow","Ekans","Arbok","Pikachu","Raichu","Sandshrew","Sandslash","Nidoran F","Nidorina","Nidoqueen","Nidoran M","Nidorino","Nidoking","Clefairy","Clefable","Vulpix","Ninetales","Jigglypuff","Wigglytuff","Zubat","Golbat","Oddish","Gloom","Vileplume","Paras","Parasect","Venonat","Venomoth","Diglett","Dugtrio","Meowth","Persian","Psyduck","Golduck","Mankey","Primeape","Growlithe","Arcanine","Poliwag","Poliwhirl","Poliwrath","Abra","Kadabra","Alakazam","Machop","Machoke","Machamp","Bellsprout","Weepinbell","Victreebel","Tentacool","Tentacruel","Geodude","Graveler","Golem","Ponyta","Rapidash","Slowpoke","Slowbro","Magnemite","Magneton","Farfetchd","Doduo","Dodrio","Seel","Dewgong","Grimer","Muk","Shellder","Cloyster","Gastly","Haunter","Gengar","Onix","Drowzee","Hypno","Krabby","Kingler","Voltorb","Electrode","Exeggcute","Exeggutor","Cubone","Marowak","Hitmonlee","Hitmonchan","Lickitung","Koffing","Weezing","Rhyhorn","Rhydon","Chansey","Tangela","Kangaskhan","Horsea","Seadra","Goldeen","Seaking","Staryu","Starmie","Mr Mime","Scyther","Jynx","Electabuzz","Magmar","Pinsir","Tauros","Magikarp","Gyarados","Lapras","Ditto","Eevee","Vaporeon","Jolteon","Flareon","Porygon","Omanyte","Omastar","Kabuto","Kabutops","Aerodactyl","Snorlax","Articuno","Zapdos","Moltres","Dratini","Dragonair","Dragonite","Mewtwo","Mew","Chikorita","Bayleef","Meganium","Cyndaquil","Quilava","Typhlosion","Totodile","Croconaw","Feraligatr","Sentret","Furret","Hoothoot","Noctowl","Ledyba","Ledian","Spinarak","Ariados","Crobat","Chinchou","Lanturn","Pichu","Cleffa","Igglybuff","Togepi","Togetic","Natu","Xatu","Mareep","Flaaffy","Ampharos","Bellossom","Marill","Azumarill","Sudowoodo","Politoed","Hoppip","Skiploom","Jumpluff","Aipom","Sunkern","Sunflora","Yanma","Wooper","Quagsire","Espeon","Umbreon","Murkrow","Slowking","Misdreavus","Unown","Wobbuffet","Girafarig","Pineco","Forretress","Dunsparce","Gligar","Steelix","Snubbull","Granbull","Qwilfish","Scizor","Shuckle","Heracross","Sneasel","Teddiursa","Ursaring","Slugma","Magcargo","Swinub","Piloswine","Corsola","Remoraid","Octillery","Delibird","Mantine","Skarmory","Houndour","Houndoom","Kingdra","Phanpy","Donphan","Porygon2","Stantler","Smeargle","Tyrogue","Hitmontop","Smoochum","Elekid","Magby","Miltank","Blissey","Raikou","Entei","Suicune","Larvitar","Pupitar","Tyranitar","Lugia","Ho Oh","Celebi","Treecko","Grovyle","Sceptile","Torchic","Combusken","Blaziken","Mudkip","Marshtomp","Swampert","Poochyena","Mightyena","Zigzagoon","Linoone","Wurmple","Silcoon","Beautifly","Cascoon","Dustox","Lotad","Lombre","Ludicolo","Seedot","Nuzleaf","Shiftry","Taillow","Swellow","Wingull","Pelipper","Ralts","Kirlia","Gardevoir","Surskit","Masquerain","Shroomish","Breloom","Slakoth","Vigoroth","Slaking","Nincada","Ninjask","Shedinja","Whismur","Loudred","Exploud","Makuhita","Hariyama","Azurill","Nosepass","Skitty","Delcatty","Sableye","Mawile","Aron","Lairon","Aggron","Meditite","Medicham","Electrike","Manectric","Plusle","Minun","Volbeat","Illumise","Roselia","Gulpin","Swalot","Carvanha","Sharpedo","Wailmer","Wailord","Numel","Camerupt","Torkoal","Spoink","Grumpig","Spinda","Trapinch","Vibrava","Flygon","Cacnea","Cacturne","Swablu","Altaria","Zangoose","Seviper","Lunatone","Solrock","Barboach","Whiscash","Corphish","Crawdaunt","Baltoy","Claydol","Lileep","Cradily","Anorith","Armaldo","Feebas","Milotic","Castform","Kecleon","Shuppet","Banette","Duskull","Dusclops","Tropius","Chimecho","Absol","Wynaut","Snorunt","Glalie","Spheal","Sealeo","Walrein","Clamperl","Huntail","Gorebyss","Relicanth","Luvdisc","Bagon","Shelgon","Salamence","Beldum","Metang","Metagross","Regirock","Regice","Registeel","Latias","Latios","Kyogre","Groudon","Rayquaza","Jirachi","Deoxys","Turtwig","Grotle","Torterra","Chimchar","Monferno","Infernape","Piplup","Prinplup","Empoleon","Starly","Staravia","Staraptor","Bidoof","Bibarel","Kricketot","Kricketune","Shinx","Luxio","Luxray","Budew","Roserade","Cranidos","Rampardos","Shieldon","Bastiodon","Burmy","Wormadam","Mothim","Combee","Vespiquen","Pachirisu","Buizel","Floatzel","Cherubi","Cherrim","Shellos","Gastrodon","Ambipom","Drifloon","Drifblim","Buneary","Lopunny","Mismagius","Honchkrow","Glameow","Purugly","Chingling","Stunky","Skuntank","Bronzor","Bronzong","Bonsly","Mime Jr","Happiny","Chatot","Spiritomb","Gible","Gabite","Garchomp","Munchlax","Riolu","Lucario","Hippopotas","Hippowdon","Skorupi","Drapion","Croagunk","Toxicroak","Carnivine","Finneon","Lumineon","Mantyke","Snover","Abomasnow","Weavile","Magnezone","Lickilicky","Rhyperior","Tangrowth","Electivire","Magmortar","Togekiss","Yanmega","Leafeon","Glaceon","Gliscor","Mamoswine","Porygon Z","Gallade","Probopass","Dusknoir","Froslass","Rotom","Uxie","Mesprit","Azelf","Dialga","Palkia","Heatran","Regigigas","Giratina","Cresselia","Phione","Manaphy","Darkrai","Shaymin","Arceus","Victini","Snivy","Servine","Serperior","Tepig","Pignite","Emboar","Oshawott","Dewott","Samurott","Patrat","Watchog","Lillipup","Herdier","Stoutland","Purrloin","Liepard","Pansage","Simisage","Pansear","Simisear","Panpour","Simipour","Munna","Musharna","Pidove","Tranquill","Unfezant","Blitzle","Zebstrika","Roggenrola","Boldore","Gigalith","Woobat","Swoobat","Drilbur","Excadrill","Audino","Timburr","Gurdurr","Conkeldurr","Tympole","Palpitoad","Seismitoad","Throh","Sawk","Sewaddle","Swadloon","Leavanny","Venipede","Whirlipede","Scolipede","Cottonee","Whimsicott","Petilil","Lilligant","Basculin","Sandile","Krokorok","Krookodile","Darumaka","Darmanitan","Maractus","Dwebble","Crustle","Scraggy","Scrafty","Sigilyph","Yamask","Cofagrigus","Tirtouga","Carracosta","Archen","Archeops","Trubbish","Garbodor","Zorua","Zoroark","Minccino","Cinccino","Gothita","Gothorita","Gothitelle","Solosis","Duosion","Reuniclus","Ducklett","Swanna","Vanillite","Vanillish","Vanilluxe","Deerling","Sawsbuck","Emolga","Karrablast","Escavalier","Foongus","Amoonguss","Frillish","Jellicent","Alomomola","Joltik","Galvantula","Ferroseed","Ferrothorn","Klink","Klang","Klinklang","Tynamo","Eelektrik","Eelektross","Elgyem","Beheeyem","Litwick","Lampent","Chandelure","Axew","Fraxure","Haxorus","Cubchoo","Beartic","Cryogonal","Shelmet","Accelgor","Stunfisk","Mienfoo","Mienshao","Druddigon","Golett","Golurk","Pawniard","Bisharp","Bouffalant","Rufflet","Braviary","Vullaby","Mandibuzz","Heatmor","Durant","Deino","Zweilous","Hydreigon","Larvesta","Volcarona","Cobalion","Terrakion","Virizion","Tornadus","Thundurus","Reshiram","Zekrom","Landorus","Kyurem","Keldeo","Meloetta","Genesect","Chespin","Quilladin","Chesnaught","Fennekin","Braixen","Delphox","Froakie","Frogadier","Greninja","Bunnelby","Diggersby","Fletchling","Fletchinder","Talonflame","Scatterbug","Spewpa","Vivillon","Litleo","Pyroar","Flabebe","Floette","Florges","Skiddo","Gogoat","Pancham","Pangoro","Furfrou","Espurr","Meowstic","Honedge","Doublade","Aegislash","Spritzee","Aromatisse","Swirlix","Slurpuff","Inkay","Malamar","Binacle","Barbaracle","Skrelp","Dragalge","Clauncher","Clawitzer","Helioptile","Heliolisk","Tyrunt","Tyrantrum","Amaura","Aurorus","Sylveon","Hawlucha","Dedenne","Carbink","Goomy","Sliggoo","Goodra","Klefki","Phantump","Trevenant","Pumpkaboo","Gourgeist","Bergmite","Avalugg","Noibat","Noivern","Xerneas","Yveltal","Zygarde","Diancie","Hoopa","Volcanion","Rowlet","Dartrix","Decidueye","Litten","Torracat","Incineroar","Popplio","Brionne","Primarina","Pikipek","Trumbeak","Toucannon","Yungoos","Gumshoos","Grubbin","Charjabug","Vikavolt","Crabrawler","Crabominable","Oricorio","Cutiefly","Ribombee","Rockruff","Lycanroc","Wishiwashi","Mareanie","Toxapex","Mudbray","Mudsdale","Dewpider","Araquanid","Fomantis","Lurantis","Morelull","Shiinotic","Salandit","Salazzle","Stufful","Bewear","Bounsweet","Steenee","Tsareena","Comfey","Oranguru","Passimian","Wimpod","Golisopod","Sandygast","Palossand","Pyukumuku","Type Null","Silvally","Minior","Komala","Turtonator","Togedemaru","Mimikyu","Bruxish","Drampa","Dhelmise","Jangmo O","Hakamo O","Kommo O","Tapu Koko","Tapu Lele","Tapu Bulu","Tapu Fini","Cosmog","Cosmoem","Solgaleo","Lunala","Nihilego","Buzzwole","Pheromosa","Xurkitree","Celesteela","Kartana","Guzzlord","Necrozma","Magearna","Marshadow","Poipole","Naganadel","Stakataka","Blacephalon","Zeraora","Meltan","Melmetal","Grookey","Thwackey","Rillaboom","Scorbunny","Raboot","Cinderace","Sobble","Drizzile","Inteleon","Skwovet","Greedent","Rookidee","Corvisquire","Corviknight","Blipbug","Dottler","Orbeetle","Nickit","Thievul","Gossifleur","Eldegoss","Wooloo","Dubwool","Chewtle","Drednaw","Yamper","Boltund","Rolycoly","Carkol","Coalossal","Applin","Flapple","Appletun","Silicobra","Sandaconda","Cramorant","Arrokuda","Barraskewda","Toxel","Toxtricity","Sizzlipede","Centiskorch","Clobbopus","Grapploct","Sinistea","Polteageist","Hatenna","Hattrem","Hatterene","Impidimp","Morgrem","Grimmsnarl","Obstagoon","Perrserker","Cursola","Sirfetchd","Mr Rime","Runerigus","Milcery","Alcremie","Falinks","Pincurchin","Snom","Frosmoth","Stonjourner","Eiscue","Indeedee","Morpeko","Cufant","Copperajah","Dracozolt","Arctozolt","Dracovish","Arctovish","Duraludon","Dreepy","Drakloak","Dragapult","Zacian","Zamazenta","Eternatus","Kubfu","Urshifu","Zarude","Regieleki","Regidrago","Glastrier","Spectrier","Calyrex","Venusaur Mega","Charizard Mega X","Charizard Mega Y","Blastoise Mega","Beedrill Mega","Pidgeot Mega","Alakazam Mega","Slowbro Mega","Gengar Mega","Kangaskhan Mega","Pinsir Mega","Gyarados Mega","Aerodactyl Mega","Mewtwo Mega X","Mewtwo Mega Y","Ampharos Mega","Steelix Mega","Scizor Mega","Heracross Mega","Houndoom Mega","Tyranitar Mega","Sceptile Mega","Blaziken Mega","Swampert Mega","Gardevoir Mega","Sableye Mega","Mawile Mega","Aggron Mega","Medicham Mega","Manectric Mega","Sharpedo Mega","Camerupt Mega","Altaria Mega","Banette Mega","Absol Mega","Glalie Mega","Salamence Mega","Metagross Mega","Latias Mega","Latios Mega","Lopunny Mega","Garchomp Mega","Lucario Mega","Abomasnow Mega","Gallade Mega","Audino Mega","Diancie Mega","Rayquaza Mega","Kyogre Primal","Groudon Prima","Rattata Alolan","Raticate Alolan","Raichu Alolan","Sandshrew Alolan","Sandslash Alolan","Vulpix Alolan","Ninetales Alolan","Diglett Alolan","Dugtrio Alolan","Meowth Alolan","Persian Alolan","Geodude Alolan","Graveler Alolan","Golem Alolan","Grimer Alolan","Muk Alolan","Exeggutor Alolan","Marowak Alolan","Meowth Galarian","Ponyta Galarian","Rapidash Galarian","Slowpoke Galarian","Slowbro Galarian","Farfetchd Galarian","Weezing Galarian","Mr Mime Galarian","Articuno Galarian","Zapdos Galarian","Moltres Galarian","Slowking Galarian","Corsola Galarian","Zigzagoon Galarian","Linoone Galarian","Darumaka Galarian","Darmanitan Galarian","Yamask Galarian","Stunfisk Galarian","Pikachu Cosplay","Pikachu Rock Star","Pikachu Belle","Pikachu Pop Star","Pikachu Ph D","Pikachu Libre","Pikachu Original Cap","Pikachu Hoenn Cap","Pikachu Sinnoh Cap","Pikachu Unova Cap","Pikachu Kalos Cap","Pikachu Alola Cap","Pikachu Partner Cap","Pikachu World Cap","Pichu Spiky Eared","Unown B","Unown C","Unown D","Unown E","Unown F","Unown G","Unown H","Unown I","Unown J","Unown K","Unown L","Unown M","Unown N","Unown O","Unown P","Unown Q","Unown R","Unown S","Unown T","Unown U","Unown V","Unown W","Unown X","Unown Y","Unown Z","Unown Emark","Unown Qmark","Castform Sunny","Castform Rainy","Castform Snowy","Deoxys Attack","Deoxys Defense","Deoxys Speed","Burmy Sandy Cloak","Burmy Trash Cloak","Wormadam Sandy Cloak","Wormadam Trash Cloak","Cherrim Sunshine","Shellos East Sea","Gastrodon East Sea","Rotom Heat","Rotom Wash","Rotom Frost","Rotom Fan","Rotom Mow","Giratina Origin","Shaymin Sky","Arceus Fighting","Arceus Flying","Arceus Poison","Arceus Ground","Arceus Rock","Arceus Bug","Arceus Ghost","Arceus Steel","Arceus Fire","Arceus Water","Arceus Grass","Arceus Electric","Arceus Psychic","Arceus Ice","Arceus Dragon","Arceus Dark","Arceus Fairy","Basculin Blue Striped","Darmanitan Zen Mode","Darmanitan Zen Mode Galarian","Deerling Summer","Deerling Autumn","Deerling Winter","Sawsbuck Summer","Sawsbuck Autumn","Sawsbuck Winter","Tornadus Therian","Thundurus Therian","Landorus Therian","Kyurem White","Kyurem Black","Keldeo Resolute","Meloetta Pirouette","Genesect Douse Drive","Genesect Shock Drive","Genesect Burn Drive","Genesect Chill Drive","Greninja Battle Bond","Greninja Ash","Vivillon Polar","Vivillon Tundra","Vivillon Continental","Vivillon Garden","Vivillon Elegant","Vivillon Meadow","Vivillon Modern","Vivillon Marine","Vivillon Archipelago","Vivillon High Plains","Vivillon Sandstorm","Vivillon River","Vivillon Monsoon","Vivillon Savanna","Vivillon Sun","Vivillon Ocean","Vivillon Jungle","Vivillon Fancy","Vivillon Poke Ball","Flabebe Yellow Flower","Flabebe Orange Flower","Flabebe Blue Flower","Flabebe White Flower","Floette Yellow Flower","Floette Orange Flower","Floette Blue Flower","Floette White Flower","Floette Eternal Flower","Florges Yellow Flower","Florges Orange Flower","Florges Blue Flower","Florges White Flower","Furfrou Heart Trim","Furfrou Star Trim","Furfrou Diamond Trim","Furfrou Debutante Trim","Furfrou Matron Trim","Furfrou Dandy Trim","Furfrou La Reine Trim","Furfrou Kabuki Trim","Furfrou Pharaoh Trim","Meowstic Female","Aegislash Blade","Pumpkaboo Small","Pumpkaboo Large","Pumpkaboo Super","Gourgeist Small","Gourgeist Large","Gourgeist Super","Xerneas Active","Zygarde 10","Zygarde 10 Power Construct","Zygarde 50 Power Construct","Zygarde Complete","Hoopa Unbound","Oricorio Pom Pom","Oricorio Pau","Oricorio Sensu","Rockruff Own Tempo","Lycanroc Midnight","Lycanroc Dusk","Wishiwashi School","Silvally Fighting","Silvally Flying","Silvally Poison","Silvally Ground","Silvally Rock","Silvally Bug","Silvally Ghost","Silvally Steel","Silvally Fire","Silvally Water","Silvally Grass","Silvally Electric","Silvally Psychic","Silvally Ice","Silvally Dragon","Silvally Dark","Silvally Fairy","Minior Meteor Orange","Minior Meteor Yellow","Minior Meteor Green","Minior Meteor Blue","Minior Meteor Indigo","Minior Meteor Violet","Minior Core Red","Minior Core Orange","Minior Core Yellow","Minior Core Green","Minior Core Blue","Minior Core Indigo","Minior Core Violet","Mimikyu Busted","Necrozma Dusk Mane","Necrozma Dawn Wings","Necrozma Ultra","Magearna Original Color","Cramorant Gulping","Cramorant Gorging","Toxtricity Low Key","Sinistea Antique","Polteageist Antique","Alcremie Ruby Cream","Alcremie Matcha Cream","Alcremie Mint Cream","Alcremie Lemon Cream","Alcremie Salted Cream","Alcremie Ruby Swirl","Alcremie Caramel Swirl","Alcremie Rainbow Swirl","Eiscue Noice Face","Indeedee Female","Morpeko Hangry","Zacian Crowned Sword","Zamazenta Crowned Shield","Eternatus Eternamax","Urshifu Rapid Strike Style","Zarude Dada","Calyrex Ice Rider","Calyrex Shadow Rider","Milotic Mega","Butterfree Mega","Machamp Mega","Kingler Mega","Lapras Mega","Flygon Mega","Kingdra Mega","Dewgong Mega","Hitmonchan Mega","Hitmonlee Mega","Hitmontop Mega","Crobat Mega","Skarmory Mega","Bruxish Mega","Torterra Mega","Infernape Mega","Empoleon Mega","Shuckle Mega","Relicanth Mega","Quagsire Mega","Jellicent Mega","Toucannon Mega","Dragonite Mega","Breloom Mega","Slaking Mega","Cascoon Primal","Temp4 Mega","Temp5 Mega","Temp6 Mega","Temp7 Mega","Temp8 Mega","Temp9 Mega","Temp10 Mega","Infernape Regional","Noibat Regional","Noivern Regional","Temp2 Regional","Temp3 Regional","Temp4 Regional","Temp5 Regional","Temp6 Regional","Temp7 Regional","Temp8 Regional","Temp9 Regional","Temp10 Regional","Egg"]
var GEN3_ITEMS=["","Master Ball","Ultra Ball","Great Ball","Poke Ball","Safari Ball","Net Ball","Dive Ball","Nest Ball","Repeat Ball","Timer Ball","Luxury Ball","Dusk Ball","Heal Ball","Quick Ball","Cherish Ball","Fast Ball","Level Ball","Lure Ball","Heavy Ball","Love Ball","Friend Ball","Moon Ball","Sport Ball","Park Ball","Dream Ball","Beast Ball","Premier Ball","Potion","Antidote","Burn Heal","Ice Heal","Awakening","Paralyze Heal","Full Restore","Max Potion","Hyper Potion","Super Potion","Full Heal","Revive","Max Revive","Fresh Water","Soda Pop","Lemonade","Moomoo Milk","Energy Powder","Energy Root","Heal Powder","Revival Herb","Ether","Max Ether","Elixir","Max Elixir","Lava Cookie","Berry Juice","Sweet Heart","Big Malasada","Old Gateau","Sacred Ash","Hp Up","Protein","Iron","Carbos","Calcium","Rare Candy","Pp Up","Zinc","Pp Max","Ability Capsule","Ability Patch","Cheri Berry","Chesto Berry","Pecha Berry","Rawst Berry","Aspear Berry","Leppa Berry","Oran Berry","Persim Berry","Lum Berry","Sitrus Berry","Figy Berry","Wiki Berry","Mago Berry","Aguav Berry","Iapapa Berry","Razz Berry","Bluk Berry","Nanab Berry","Wepear Berry","Pinap Berry","Pomeg Berry","Kelpsy Berry","Qualot Berry","Hondew Berry","Grepa Berry","Tamato Berry","Cornn Berry","Magost Berry","Rabuta Berry","Nomel Berry","Spelon Berry","Pamtre Berry","Watmel Berry","Durin Berry","Belue Berry","Occa Berry","Passho Berry","Wacan Berry","Rindo Berry","Yache Berry","Chople Berry","Kebia Berry","Shuca Berry","Coba Berry","Payapa Berry","Tanga Berry","Charti Berry","Kasib Berry","Haban Berry","Colbur Berry","Babiri Berry","Chilan Berry","Roseli Berry","Liechi Berry","Ganlon Berry","Salac Berry","Petaya Berry","Apicot Berry","Lansat Berry","Starf Berry","Micle Berry","Custap Berry","Jaboca Berry","Rowap Berry","Kee Berry","Maranga Berry","Enigma Berry","Sun Stone","Moon Stone","Fire Stone","Thunder Stone","Water Stone","Leaf Stone","Dawn Stone","Dusk Stone","Shiny Stone","Ice Stone","Red Nectar","Yellow Nectar","Pink Nectar","Purple Nectar","Sweet Apple","Tart Apple","Cracked Pot","Galarica Cuff","Galarica Wreath","Strawberry Sweet","Love Sweet","Berry Sweet","Clover Sweet","Flower Sweet","Star Sweet","Ribbon Sweet","Blue Flute","Yellow Flute","Red Flute","Black Flute","White Flute","Shoal Salt","Shoal Shell","Red Shard","Blue Shard","Yellow Shard","Green Shard","Escape Rope","Repel","Super Repel","Max Repel","Tiny Mushroom","Big Mushroom","Balm Mushroom","Pearl","Big Pearl","Pearl String","Stardust","Star Piece","Comet Shard","Nugget","Big Nugget","Relic Copper","Relic Silver","Relic Gold","Relic Vase","Relic Statue","Relic Band","Heart Scale","Bottle Cap","Gold Bottle Cap","Honey","Rare Bone","Oval Stone","Protector","Electirizer","Magmarizer","Dubious Disc","Reaper Cloth","Prism Scale","Whipped Dream","Sachet","Upgrade","Red Scarf","Blue Scarf","Pink Scarf","Green Scarf","Yellow Scarf","Armor Fossil","Skull Fossil","Helix Fossil","Dome Fossil","Cover Fossil","Plume Fossil","Jaw Fossil","Sail Fossil","Root Fossil","Claw Fossil","Fossilized Bird","Fossilized Fish","Fossilized Drake","Fossilized Dino","Old Amber","Guard Spec","Dire Hit","X Attack","X Defense","X Speed","X Accuracy","X Sp Atk","X Sp Def","Poke Doll","Fluffy Tail","Bright Powder","White Herb","Macho Brace","Exp Share","Quick Claw","Soothe Bell","Mental Herb","Choice Band","Kings Rock","Silver Powder","Amulet Coin","Cleanse Tag","Smoke Ball","Everstone","Focus Band","Lucky Egg","Scope Lens","Metal Coat","Soft Sand","Hard Stone","Miracle Seed","Black Glasses","Black Belt","Magnet","Mystic Water","Sharp Beak","Poison Barb","Never Melt Ice","Spell Tag","Twisted Spoon","Charcoal","Dragon Fang","Silk Scarf","Leftovers","Dragon Scale","Razor Claw","Razor Fang","Shell Bell","Power Bracer","Power Belt","Power Lens","Power Band","Power Anklet","Power Weight","Power Herb","Choice Scarf","Choice Specs","Focus Sash","Wide Lens","Zoom Lens","Metronome","Muscle Band","Wise Glasses","Expert Belt","Light Clay","Icy Rock","Smooth Rock","Heat Rock","Damp Rock","Destiny Knot","Grip Claw","Life Orb","Toxic Orb","Flame Orb","Sticky Barb","Black Sludge","Iron Ball","Lagging Tail","Shed Shell","Big Root","Eviolite","Float Stone","Rocky Helmet","Air Balloon","Red Card","Ring Target","Binding Band","Eject Button","Absorb Bulb","Cell Battery","Luminous Moss","Snowball","Weakness Policy","Assault Vest","Safety Goggles","Adrenaline Orb","Terrain Extender","Protective Pads","Electric Seed","Psychic Seed","Misty Seed","Grassy Seed","Bug Gem","Dark Gem","Dragon Gem","Electric Gem","Fairy Gem","Fighting Gem","Fire Gem","Flying Gem","Ghost Gem","Grass Gem","Ground Gem","Ice Gem","Normal Gem","Poison Gem","Psychic Gem","Rock Gem","Steel Gem","Water Gem","Throat Spray","Eject Pack","Heavy Duty Boots","Blunder Policy","Room Service","Utility Umbrella","Rusted Sword","Rusted Shield","Insect Plate","Dread Plate","Draco Plate","Zap Plate","Pixie Plate","Fist Plate","Flame Plate","Sky Plate","Spooky Plate","Meadow Plate","Earth Plate","Icicle Plate","Toxic Plate","Mind Plate","Stone Plate","Iron Plate","Splash Plate","Soul Dew","Deep Sea Tooth","Deep Sea Scale","Lucky Punch","Metal Powder","Thick Club","Leek","Light Ball","Quick Powder","Adamant Orb","Lustrous Orb","Griseous Orb","Douse Drive","Shock Drive","Burn Drive","Chill Drive","Sea Incense","Lax Incense","Odd Incense","Rock Incense","Full Incense","Wave Incense","Rose Incense","Luck Incense","Pure Incense","Training Band","Candy Box","Infinite Repel","Battle Temp 4","Battle Temp 5","Battle Temp 6","Battle Temp 7","Battle Temp 8","Battle Temp 9","Battle Temp 10","Tm01 Focus Punch","Tm02 Dragon Claw","Tm03 Water Pulse","Tm04 Calm Mind","Tm05 Roar","Tm06 Toxic","Tm07 Hail","Tm08 Bulk Up","Tm09 Bullet Seed","Tm10 Hidden Power","Tm11 Sunny Day","Tm12 Taunt","Tm13 Ice Beam","Tm14 Blizzard","Tm15 Hyper Beam","Tm16 Light Screen","Tm17 Protect","Tm18 Rain Dance","Tm19 Giga Drain","Tm20 Safeguard","Tm21 Frustration","Tm22 Solarbeam","Tm23 Iron Tail","Tm24 Thunderbolt","Tm25 Thunder","Tm26 Earthquake","Tm27 Return","Tm28 Dig","Tm29 Psychic","Tm30 Shadow Ball","Tm31 Brick Break","Tm32 Double Team","Tm33 Reflect","Tm34 Sludge Wave","Tm35 Flamethrower","Tm36 Sludge Bomb","Tm37 Sandstorm","Tm38 Fire Blast","Tm39 Rock Tomb","Tm40 Aerial Ace","Tm41 Torment","Tm42 Facade","Tm43 Secret Power","Tm44 Rest","Tm45 Attract","Tm46 Thief","Tm47 Steel Wing","Tm48 Skill Swap","Tm49 Sleep Talk","Tm50 Overheat","Tm51 Roost","Tm52 Focus Blast","Tm53 Energy Ball","Tm54 Psyshock","Tm55 Scald","Tm56 Leech Life","Tm57 Charge Beam","Tm58 Endure","Tm59 Dragon Pulse","Tm60 Drain Punch","Tm61 Will O Wisp","Tm62 Acrobatics","Tm63 Rock Slide","Tm64 Explosion","Tm65 Shadow Claw","Tm66 Payback","Tm67 Recycle","Tm68 Giga Impact","Tm69 Rock Polish","Tm70 Aurora Veil","Tm71 Stone Edge","Tm72 Volt Switch","Tm73 Thunder Wave","Tm74 Gyro Ball","Tm75 Swords Dance","Tm76 Stealth Rock","Tm77 Struggle Bug","Tm78 Bulldoze","Tm79 Freeze Dry","Tm80 Venoshock","Tm81 X Scissor","Tm82 Dragon Tail","Tm83 Flame Charge","Tm84 Poison Jab","Tm85 Dream Eater","Tm86 Grass Knot","Tm87 Smack Down","Tm88 Low Sweep","Tm89 U Turn","Tm90 Substitute","Tm91 Flash Cannon","Tm92 Trick Room","Tm93 Wild Charge","Tm94 Sucker Punch","Tm95 Snarl","Tm96 Avalanche","Tm97 Dark Pulse","Tm98 False Swipe","Tm99 Dazzling Gleam","Tm100 Curse","Hm01 Cut","Hm02 Fly","Hm03 Surf","Hm04 Strength","Hm05 Flash","Hm06 Rock Smash","Hm07 Waterfall","Hm08 Dive","Odd Keystone","Gracidea","Mega Bracelet","Mach Bike","Coin Case","Itemfinder","Old Rod","Good Rod","Super Rod","Ss Ticket","Contest Pass","Wailmer Pail","Devon Goods","Soot Sack","Basement Key","Acro Bike","Egg Incubator","Letter","Eon Ticket","Exp Charm","Prison Bottle","Scanner","Go Goggles","Meteorite","Room 1 Key","Room 2 Key","Room 4 Key","Room 6 Key","Storage Key","Devon Scope","Magma Stone","Lunar Wing","Shiny Charm","Oval Charm","Magma Emblem","Old Sea Map","Mystic Ticket","Aurora Ticket","Powder Jar","Reveal Glass","Dna Splicers","Astralizer","Poke Vial","Catching Charm","Rotom Catalog","Reins Of Unity","Iceroot Carrot","Shaderoot Carrot","Wooden Crown","N Lunarizer","N Solarizer","Key Temp 3","Key Temp 4","Key Temp 5","Key Temp 6","Abomasite","Absolite","Aerodactylite","Aggronite","Alakazite","Altarianite","Ampharosite","Audinite","Banettite","Beedrillite","Blastoisinite","Blazikenite","Cameruptite","Charizardite X","Charizardite Y","Diancite","Galladite","Garchompite","Gardevoirite","Gengarite","Glalitite","Gyaradosite","Heracronite","Houndoominite","Kangaskhanite","Latiasite","Latiosite","Lopunnite","Lucarionite","Manectite","Mawilite","Medichamite","Metagrossite","Mewtwonite X","Mewtwonite Y","Pidgeotite","Pinsirite","Sablenite","Salamencite","Sceptilite","Scizorite","Sharpedonite","Slowbronite","Steelixite","Swampertite","Tyranitarite","Venusaurite","Miloticite","Red Orb","Blue Orb ","Flygonite","Butterfrenite","Laprasite","Machampite","Kinglerite","Kingdranite","Dewgongite","Hitmonchanite","Hitmonleenite","Hitmontopite","Crobatite","Skarmorynite","Bruxishite","Torterranite","Infernapenite","Empoleonite","Shucklenite","Relicanthite","Quagsirenite","Jellicentite","Iron Pill","Toucannonite ","Dragonitenite","Breloomite","Slakingite","Purple Orb","Pretty Feather","Red Apricorn","Blue Apricorn","Yellow Apricorn","Green Apricorn","Pink Apricorn","White Apricorn","Black Apricorn","Orange Mail","Harbor Mail","Glitter Mail","Mech Mail","Wood Mail","Wave Mail","Bead Mail","Shadow Mail","Tropic Mail","Dream Mail","Fab Mail","Retro Mail","Bug Memory","Dark Memory","Dragon Memory","Electric Memory","Fairy Memory","Fighting Memory","Fire Memory","Flying Memory","Ghost Memory","Grass Memory","Ground Memory","Ice Memory","Poison Memory","Psychic Memory","Rock Memory","Steel Memory","Water Memory","Oaks Parcel","Poke Flute","Secret Key","Bike Voucher","Gold Teeth","Card Key","Lift Key","Silph Scope","Bicycle","Town Map","Vs Seeker","Fame Checker","Tm Case","Berry Pouch","Teachy Tv","Tri Pass","Rainbow Pass","Tea","Ruby","Sapphire","Z Ring","Normalium Z","Fightinium Z","Flyinium Z","Poisonium Z","Groundium Z","Rockium Z","Buginium Z","Ghostium Z","Steelium Z","Firium Z","Waterium Z","Grassium Z","Electrium Z","Psychium Z","Icium Z","Dragonium Z","Darkinium Z","Fairium Z","Aloraichium Z","Decidium Z","Eevium Z","Incinium Z","Kommonium Z","Lunalium Z","Lycanium Z","Marshadium Z","Mewnium Z","Mimikium Z","Pikanium Z","Pikashunium Z","Primarium Z","Snorlium Z","Solganium Z","Tapunium Z","Ultranecrozium Z"]
var GEN3_NATURE=["Hardy","Lonely","Brave","Adamant","Naughty","Bold","Docile","Relaxed","Impish","Lax","Timid","Hasty","Serious","Jolly","Naive","Modest","Mild","Quiet","Bashful","Rash","Calm","Gentle","Sassy","Careful","Quirky"]
var GEN3_CURVE=[3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,4,4,0,0,4,4,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,5,5,3,3,3,3,3,3,3,3,3,3,3,3,5,5,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,5,5,3,3,3,0,0,0,0,0,0,0,5,5,0,0,0,0,0,0,0,5,5,4,0,0,0,0,0,0,5,5,0,0,0,0,0,5,5,5,5,5,0,0,0,0,0,0,0,0,0,0,5,5,5,5,5,5,5,5,5,3,3,3,3,3,3,3,3,3,3,0,0,0,0,4,4,4,4,0,5,5,0,4,4,4,4,0,0,3,3,3,3,4,4,0,3,3,3,3,4,3,3,0,0,0,0,0,3,0,4,0,0,0,0,0,0,3,0,4,4,0,0,3,5,3,0,0,0,0,5,5,4,0,0,4,5,5,5,5,0,0,0,0,5,4,0,0,0,0,0,5,4,5,5,5,5,5,5,5,5,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,3,0,0,5,5,5,0,0,2,2,5,5,5,1,1,1,3,3,3,2,2,4,0,4,4,3,4,5,5,5,0,0,5,5,0,0,1,2,3,2,2,5,5,2,2,0,0,0,4,4,4,3,3,3,3,3,1,1,1,2,4,4,0,0,2,2,0,0,1,1,1,1,1,1,0,3,4,4,4,4,5,4,3,0,0,0,3,3,3,1,1,1,5,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,3,3,3,3,3,3,3,3,3,3,3,3,0,0,3,3,3,3,3,3,3,1,1,1,1,0,0,0,3,3,0,0,0,0,0,0,0,4,2,2,0,0,4,3,4,4,4,0,0,0,0,0,0,4,3,0,5,5,5,5,3,3,5,5,5,5,0,0,5,1,1,5,5,5,3,0,0,5,0,0,0,4,0,0,0,3,5,0,5,0,4,0,0,5,5,5,5,5,5,5,5,5,5,5,5,3,5,5,3,3,3,3,3,3,3,3,3,0,0,3,3,3,0,0,0,0,0,0,0,0,4,4,3,3,3,0,0,3,3,3,0,0,0,0,4,3,3,3,3,3,3,0,0,3,3,3,3,3,3,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,4,4,3,3,3,3,3,3,0,0,5,5,5,0,0,0,0,0,0,0,0,0,4,0,0,0,0,3,3,3,5,5,5,0,0,3,3,3,5,5,5,0,0,0,0,0,0,3,3,0,0,0,0,0,0,5,5,5,5,0,0,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,3,3,3,3,3,3,3,3,3,0,0,3,3,3,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,5,0,0,0,0,0,0,0,0,0,5,5,5,5,4,0,0,0,0,0,0,0,0,5,5,5,5,5,5,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,4,5,5,0,0,0,0,4,5,5,0,5,0,0,0,0,0,0,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,3,3,3,3,3,3,3,3,3,0,0,3,3,3,0,0,0,4,4,0,0,0,0,0,0,4,4,3,3,3,1,1,1,0,0,0,5,5,3,3,0,0,3,3,0,0,5,5,5,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,5,5,4,0,0,0,5,5,5,5,0,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,0,0,0,3,0,5,3,3,3,3,0,3,3,0,3,0,5,5,5,5,5,3,0,0,5,5,5,3,3,3,5,3,4,5,0,5,5,0,1,4,3,0,5,5,5,5,0,5,3,5,5,4,5,5,5,5,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,5,0,0,0,0,0,0,0,0,0,5,5,5,0,4,0,0,3,3,0,0,5,5,0,0,3,0,3,3,0,3,3,5,5,5,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,5,5,0,0,0,0,0,0,0,0,0,0,0,0,5,5,5,3,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,0,0,3,3,0,0,0,0,0,0,5,5,5,5,5,5,5,5,5,5,5,5,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,5,5,5,5,5,0,0,0,0,0,0,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,5,5,5,0,0,3,0,0,0,0,0,0,0,0,0,0,5,4,0,5,5,5,5,5,5,5,5];

// LITTLE ENDIAN !
function readNbytes(bof, nBytes, bytes){
    var resBytes = bytes[bof];
    for (var i = 1; i< nBytes; i++){
        resBytes = resBytes | (bytes[bof + i] << i*8)
    }
    return (resBytes >>> 0)
}

function readTeamSize(teamOffset, bytes){
    var oft = teamOffset + 564;
    var sizeTeam = readNbytes(oft,4,bytes);
    return sizeTeam; 
}

function readBox(ofs ,bytes, missedBytes, remainingUnread, maxOfs) {
    var monList = []
    if (missedBytes){
        var nbToFill = 80 - missedBytes.length
        var bytesFilling = bytes.slice(ofs, ofs + nbToFill)
        var mergedBytes = new Uint8Array(80)
        mergedBytes.set(missedBytes);
        mergedBytes.set(bytesFilling, missedBytes.length);
        ofs += nbToFill;
        var mon = readMonBox(0, mergedBytes);
        if (mon) monList.push(createGEN3mon(mon))
        if (! remainingUnread--) return {list: monList, mof: null, remainingUnread: 0};
    }
    for (; (ofs + 80) <= maxOfs; ofs+=80){
        var mon = readMonBox(ofs, bytes);
        try {
            if (mon) monList.push(createGEN3mon(mon))
        } catch (e){
            console.log(bytes.slice(ofs - 8, ofs + 88))
        }
        
        if (! remainingUnread--) return {list: monList, mof: null, remainingUnread: 0};
    }
    if (ofs != maxOfs) {
        missedBytes = bytes.slice(ofs, maxOfs)
    } else {
        missedBytes = null
    }
    return { list: monList, mof: missedBytes, remainingUnread: remainingUnread}
}

function getFooterData(startOffset, endOffset, bytes) {
    var SIZE_SECTOR = 4096;
    var TI, //TEAM / ITEM
        SI, //Save index
        PC = [], // PC
        PCA, //PC A
        PCB; //PC B
        
    for (var ofs = startOffset; ofs < endOffset; ofs += SIZE_SECTOR){
        var off = ofs + 4084 //offset footer
        var sID = readNbytes(off,2,bytes)//Sector ID
        if (sID == 1){
            TI = ofs
        } else if (sID >= 5){
            PC[sID - 5] = ofs
        }
        switch(sID){
            case 1:
                TI = ofs; break;
            case 5:
                PCA = ofs; break;
            case 6:
                PCB = ofs; break;
        }
        var CS = readNbytes(off +2 ,2,bytes); //Checksum
        var SG = readNbytes(off +4 ,2,bytes); //Signature
        SI =readNbytes(off +8 ,2,bytes); //Save Index
    }
    if (SI == 65535) SI = 0; //javascript aint build for binary
    return {
        SI: SI,
        TI: TI,
        PCA: PCA,
        PCB: PCB,
        PC: PC,
    }
}
var comp = []
function readSubStructure(OTID, personV, start, bytes){
    var key = OTID ^ personV;
    var substructSelector = [
		[0, 1, 2, 3],
		[0, 1, 3, 2],
		[0, 2, 1, 3],
		[0, 3, 1, 2],
		[0, 2, 3, 1],
		[0, 3, 2, 1],
		[1, 0, 2, 3],
		[1, 0, 3, 2],
		[2, 0, 1, 3],
		[3, 0, 1, 2],
		[2, 0, 3, 1],
		[3, 0, 2, 1],
		[1, 2, 0, 3],
		[1, 3, 0, 2],
		[2, 1, 0, 3],
		[3, 1, 0, 2],
		[2, 3, 0, 1],
		[3, 2, 0, 1],
		[1, 2, 3, 0],
		[1, 3, 2, 0],
		[2, 1, 3, 0],
		[3, 1, 2, 0],
		[2, 3, 1, 0],
		[3, 2, 1, 0],
    ]
    var selected = substructSelector[(personV >>> 0) % 24]
    var ss0 = [0,0]
	var ss1 = [0,0]
	var ss2 = [0,0]
	var ss3 = [0,0]
    for (var i = 0; i<3; i++){
        ss0[i] = readNbytes(start + 32 + selected[0] * 12 + i * 4 ,4, bytes) ^ key;
        ss1[i] = readNbytes(start + 32 + selected[1] * 12 + i * 4 ,4, bytes) ^ key;
        ss2[i] = readNbytes(start + 32 + selected[2] * 12 + i * 4 ,4, bytes) ^ key;
        ss3[i] = readNbytes(start + 32 + selected[3] * 12 + i * 4 ,4, bytes) ^ key;
    }
    //var 
    var mon = {};

    mon.species = ss0[0] & 0xFFFF;
	mon.heldItem = ss0[0] >> 16;
	mon.experience = ss0[1];
	mon.ppBonuses = ss0[2] & 0xFF;
	mon.friendship = (ss0[2] >> 8) & 0xFF;

    mon.moves = [
		ss1[0] & 0xFFFF,
		ss1[0] >> 16,
		ss1[1] & 0xFFFF,
		ss1[1] >> 16
    ]
	mon.pp = [
		ss1[2] & 0xFF,
		(ss1[2] >> 8) & 0xFF,
		(ss1[2] >> 16) & 0xFF,
		ss1[2] >> 24
    ]

    mon.hpEV = ss2[0] & 0xFF
	mon.attackEV = (ss2[0] >> 8) & 0xFF
	mon.defenseEV = (ss2[0] >> 16) & 0xFF
	mon.speedEV = ss2[0] >> 24
	mon.spAttackEV = ss2[1] & 0xFF
	mon.spDefenseEV = (ss2[1] >> 8) & 0xFF
    
	mon.cool = (ss2[1] >> 16) & 0xFF
	mon.beauty = ss2[1] >> 24
	mon.cute = ss2[2] & 0xFF
	mon.smart = (ss2[2] >> 8) & 0xFF
	mon.tough = (ss2[2] >> 16) & 0xFF
	mon.sheen = ss2[2] >> 24
	mon.pokerus = ss3[0] & 0xFF
	mon.metLocation = (ss3[0] >> 8) & 0xFF

	flags = ss3[0] >> 16
	mon.metLevel = flags & 0x7F
	mon.metGame = (flags >> 7) & 0xF
    mon.hiddenNature = (flags >> 10);
	mon.otGender = (flags >> 15) & 0x1
    flags = ss3[1]
	mon.hpIV = flags >> 1 & 0x1F
	mon.attackIV = (flags >> 5) & 0x1F
	mon.defenseIV = (flags >> 10) & 0x1F
	mon.speedIV = (flags >> 15) & 0x1F
	mon.spAttackIV = (flags >> 20) & 0x1F
	mon.spDefenseIV = (flags >> 25) & 0x1F
    mon.isEgg = (flags >> 30) & 0x1
    mon.zeroSpe = (flags >> 31) & 0x1
    
    flags = ss3[2]
    mon.pokeball = flags & 0xF;
    mon.altAbility = (flags >> 5);
	mon.coolRibbon = flags & 7
	mon.beautyRibbon = (flags >> 3) & 7
	mon.cuteRibbon = (flags >> 6) & 7
	mon.smartRibbon = (flags >> 9) & 7
	mon.toughRibbon = (flags >> 12) & 7
	mon.championRibbon = (flags >> 15) & 1
	mon.winningRibbon = (flags >> 16) & 1
	mon.victoryRibbon = (flags >> 17) & 1
	mon.artistRibbon = (flags >> 18) & 1
	mon.effortRibbon = (flags >> 19) & 1
	mon.marineRibbon = (flags >> 20) & 1
	mon.landRibbon = (flags >> 21) & 1
	mon.skyRibbon = (flags >> 22) & 1
	mon.countryRibbon = (flags >> 23) & 1
	mon.nationalRibbon = (flags >> 24) & 1
	mon.earthRibbon = (flags >> 25) & 1
	mon.worldRibbon = (flags >> 26) & 1
    return mon
}

//80 bytes
function readMonBox(start, bytes){
    var personality = readNbytes(start, 4, bytes);
    if (!personality) return false
    var otId = readNbytes(start + 4, 4, bytes);
    //var nickName = readNbytes(start + 8, 10, bytes);
    //var lang = readNbytes(start + 18, 1, bytes);
    //var eggName = readNbytes(start + 19, 1, bytes);
    //var OTname = readNbytes(start + 20, 7, bytes);
    //var markings = readNbytes(start + 27, 1, bytes);
    //var checksum = readNbytes(start + 28, 2, bytes);
    //var wtf = readNbytes(start + 30, 2, bytes);
    //var data = readNbytes(start + 32, 48, bytes);
    var mon = readSubStructure(otId, personality, start,bytes);
    mon.personality = personality;
    mon.otId = otId;
    //Box trick
    mon.level = getGEN3level(mon.experience, mon.species);
    return mon
}
//100 bytes
function readMonParty(start, bytes){
    var personality = readNbytes(start, 4, bytes);
    var otId = readNbytes(start + 4, 4, bytes);
    //var nickName = readNbytes(start + 8, 10, bytes);
    //var lang = readNbytes(start + 18, 1, bytes);
    //var eggName = readNbytes(start + 19, 1, bytes);
    //var OTname = readNbytes(start + 20, 7, bytes);
    //var markings = readNbytes(start + 27, 1, bytes);
    //var checksum = readNbytes(start + 28, 2, bytes);
    //var wtf = readNbytes(start + 30, 2, bytes);
    //var data = readNbytes(start + 32, 48, bytes);
    var mon = readSubStructure(otId, personality, start,bytes);
    mon.personality = personality;
    mon.otId = otId;
    //var status = readNbytes(start + 80, 4, bytes);
    mon.level = readNbytes(start + 84, 1, bytes);
    //var pkrs = readNbytes(start + 85, 1, bytes);
    mon.liveStat = {}
    mon.liveStat.currentHP = readNbytes(start + 86, 2, bytes);
    mon.liveStat.totalHP = readNbytes(start + 88, 2, bytes);
    mon.liveStat.atk = readNbytes(start + 90, 2, bytes);
    mon.liveStat.def = readNbytes(start + 92, 2, bytes);
    mon.liveStat.spe = readNbytes(start + 94, 2, bytes);
    mon.liveStat.spa = readNbytes(start + 96, 2, bytes);
    mon.liveStat.spd = readNbytes(start + 98, 2, bytes);
    return mon
}
function slowCurve(n){
    return Math.floor((5*(n**3))/4)
}
function fastCurve(n){
    return Math.floor((4*(n**3))/5)
}
function medfastCurve(n){
    return n**3
}
function medslowCurve(n){
    return Math.floor((6 * (n)**3) / 5) - (15 * (n)**2) + (100 * n) - 140
}
function erraticCurve(n){
    if (n<=50) return Math.floor(((100 - n)*n**3)/50)
    if (n<=68) return Math.floor(((150 - n)*n**3)/100)
    if (n<=98) return Math.floor(Math.floor((1911 - 10 * n) / 3) * n**3 / 500)
    return Math.floor((160 - n) * n**3 / 100)
}
function flutuatingCurve(n){
    if (n<15) return Math.floor((Math.floor((n + 1) / 3) + 24) * n**3 / 50)
	if (n<=36) return Math.floor((n + 14) * n**3 / 50)
	return Math.floor((Math.floor(n / 2) + 32) * n**3 / 50)
}
function getGEN3expRequired(species,level) {
	var expCurve = GEN3_CURVE[species]
	if (expCurve == 0) return medfastCurve(level)
	if (expCurve == 1) return erraticCurve(level)
	if (expCurve == 2) return flutuatingCurve(level)
	if (expCurve == 3) return medslowCurve(level)
	if (expCurve == 4) return fastCurve(level)
	if (expCurve == 5) return slowCurve(level)
}

function getGEN3level(exp, species){
    var level = 1
	while (exp >= getGEN3expRequired(species,level+1)) {
        level=level+1
    }
	return level
}

function getGEN3Ability(mon){
    var current = pokedex[GEN3_MONS[mon.species]].abilities[mon.altAbility]
    return current
}
function getGEN3Nature(mon){
    //mon.hiddenNature = mon.personality % 25;
    if (mon.hiddenNature == 26){
        return GEN3_NATURE[mon.personality % 25]
    }
    return GEN3_NATURE[mon.hiddenNature]
}

function getGEN3HP(mon) {
    var hptype = ((mon.hpIV%2 + (2*(mon.attackIV%2))+(4*(mon.defenseIV%2))+(8*(mon.speedIV%2))+(16*(mon.spAttackIV%2))+(32*(mon.spDefenseIV%2)))*5)/21
    hptype = Math.floor(hptype)
    switch(hptype){
        case 0:
		    return "Fighting";
        case 1:
		    return "Flying";
        case 2:
		    return "Poison";
        case 3:
            return "Ground";
        case 4:
            return "Rock";
        case 5:
            return "Bug";
        case 6:
            return "Ghost";
        case 7:
            return "Steel";
        case 8:
            return "Fire";
        case 9:
            return "Water";
        case 10:
            return "Grass";
        case 11:
            return "Electric";
        case 12:
            return "Psychic";
        case 13:
            return "Ice";
        case 14:
            return "Dragon";
        case 15:
            return "Dark";
    }
}
function createGEN3mon(mon){
    var poke = {};
    poke.person = mon.personality;
    poke.item = GEN3_ITEMS[mon.heldItem];
    poke.species = GEN3_MONS[mon.species];
    poke.ability = getGEN3Ability(mon);
    poke.level = mon.level;
    poke.nature = getGEN3Nature(mon);
    poke.ivs = {
        hp: mon.hpIV,
        at: mon.attackIV,
        df: mon.defenseIV,
        sa: mon.spAttackIV,
        sd: mon.spDefenseIV,
        sp: mon.speedIV
    };
    poke.evs = {
        hp: mon.hpEV,
        at: mon.attackEV,
        df: mon.defenseEV,
        sa: mon.spAttackEV,
        sd: mon.spDefenseEV,
        sp: mon.speedEV
    };
    poke.hPWR = getGEN3HP(mon)
    poke.moves = [];
    for (var i=0; i<4; i++) {
        var move = GEN3_MOVES[mon.moves[i]]
        if (move == "Hidden Power") {
            move = move + " " + poke.hPWR;
        }
        poke.moves[i] = move
    }
    poke.zeroSpe = mon.zeroSpe;
    var genderRatio = pokedex[poke.species].genderR
    var pGender = mon.personality % 256
    if (genderRatio == 255){
        poke.gender = 'N'
    } else if (genderRatio != 0 && genderRatio < pGender ){
        poke.gender = 'F'
    } else {
        poke.gender = 'M'
    }
    return poke
}

function parseFileGen3(file){
    if (!file) return
    if (file.target) file = file.target.files[0]
    var reader = new FileReader();
	reader.onload = function (e) {
		var bytes = new Uint8Array(e.target.result);
        //size check, for now only emerald.
        if (bytes.length != 131072 && bytes.length != 131088) {
            console.warn("Not a pokemon emerald game", bytes.length)
            return
        }
        var SIZE_SECTOR = 4096;
        var DATA_FIELD = 3968;
        var COUNT_MAIN = 14; 
        var SIZE_MAIN = COUNT_MAIN * SIZE_SECTOR;
        var GameA = getFooterData(0, 57344, bytes);
        var GameB = getFooterData(57344, 114688, bytes)
        var RSave = GameA.SI > GameB.SI ? GameA : GameB; //recent Save
        try {
            var teamsize = readTeamSize(RSave.TI, bytes)
            var teamOffset = RSave.TI + 568;
            var teamList = []
            for (var i = 0; i< teamsize; i++){
                var mon = readMonParty(teamOffset + (i * 100), bytes)
                teamList.push(createGEN3mon(mon));
            }
            dispatchPlayerMon(teamList);
            
           
            // get the numbers of pokemon to read from the settings
            var remainingUnread = +$('#sv-nb-pkm').val();
            var missedBytes = null
            var monList = [];
            for (var boxI = 0; boxI < RSave.PC.length; boxI++){
                var boxOfs = RSave.PC[boxI];
                var maxOfs = RSave.PC[boxI] + 3968;
                if (boxI == 0) {
                    boxOfs += 4
                }
                if (boxI == 8) {
                    maxOfs = RSave.PC[boxI] + 2000;
                }
                var box = readBox(boxOfs, bytes, missedBytes, remainingUnread, maxOfs)
                missedBytes = box.mof
                monList = monList.concat(box.list)
                remainingUnread = box.remainingUnread
                if (remainingUnread == 0) break;
            }
            dispatchPlayerMon(monList);
            /*
            var currentBox = readNbytes(RSave.PCA, 4, bytes) + 1
            var boxA = readBox(RSave.PCA + 4, bytes)
            var mof = boxA.mof
            var missedBytes = bytes.slice(RSave.PCA + 3968 - mof, RSave.PCA + 3968)
            var boxB = readBox(RSave.PCB, bytes, missedBytes)
            var mof = boxB.mof
            var boxedMonsList = boxA.list.concat(boxB.list)*/
            /*var currentBox = readNbytes(RSave.PCA, 4, bytes) + 1
            var boxA = readBox(RSave.PCA + 4, bytes)
            var mof = boxA.mof
            var missedBytes = bytes.slice(RSave.PCA + 3968 - mof, RSave.PCA + 3968)
            var boxB = readBox(RSave.PCB + 4, bytes, missedBytes)
            var mof = boxB.mof
            var missedBytes = bytes.slice(RSave.PCB + 3968 - mof, RSave.PCB + 3968)
            var boxedMonsList = boxA.list.concat(boxB.list)
            var boxC = RSave.PC[2]
            var boxC = readBox(RSave.PCB + 8, bytes, missedBytes)
            var mof = boxC.mof
            boxedMonsList = boxedMonsList.concat(boxC.list)
            dispatchPlayerMon(boxedMonsList)*/
                  
        } catch (e) {
            console.warn(e)
        }
    }
    reader.readAsArrayBuffer(file);
};

function gen3_loadsave (){
    var importZone = $('#import-zone')
    importZone.val("");
    importZone.prop("placeholder", "you can also drop your save file here");
    importZone.on({
        dragenter: function(e){
            if (pokeDragged){
                return
            }
            importZone.css("background-color", "var(--button-hover)")
        },
        dragleave: function(e){
            if (pokeDragged){ // don't show the visual hint for a non-file, should make this more robust tho
                return
            }
            importZone.css("background-color", "var(--background)")
        },
        drop: function(e){
            if(e.originalEvent.dataTransfer && e.originalEvent.dataTransfer.files.length) {
                e.preventDefault();
                e.stopPropagation();
                parseFileGen3(e.originalEvent.dataTransfer.files[0]);
                importZone.css("background-color", "var(--background)")
            }
        }
    })
    var input = document.createElement("input");
    input.id = "savefile-upload";
    input.type = "file";
    input.accept = ".sav";
    input.className = "visually-hidden";
    input.onchange = parseFileGen3;
    var button = document.createElement("button");
    button.innerText = "Import from savefile";
    button.onclick = ()=>{input.click()}
    var importDiv = document.getElementById("import-1_wrapper");
    importDiv.append(input);
    importDiv.append(button);
};

$(document).ready(function(){
    gen3_loadsave()
});